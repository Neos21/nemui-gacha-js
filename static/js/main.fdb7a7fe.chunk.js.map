{"version":3,"sources":["lib/index.ts","App.tsx","index.tsx"],"names":["removeGacha","input","replace","parseNegative","tokenizer","parsed","tokenize","replaces","lastIndex","length","last","pos","surface_form","endsWith","push","index","word","match","conjugated_type","startsWith","prevIndex","prev","includes","basic_form","pos_detail_1","reduce","current","replaceFound","find","NemuiGachaError","message","name","console","error","this","InvalidArgumentsError","ParseNegativeRuntimeError","originalError","ParseNegativeFailedError","nemuiGacha","exec","isForceNegative","undefined","trim","negative","removedInput","isParseNegative","Math","random","App","props","state","onChangeText","event","setState","target","value","isDisabled","onChangeCheckbox","checked","onSubmit","preventDefault","result","errorFailed","kuromoji","dicPath","build","window","location","search","params","slice","split","key","decodeURIComponent","force","q","setTimeout","header","footer","className","href","rel","type","onChange","placeholder","onClick","disabled","tabIndex","React","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fdb7a7fe.chunk.js","sourcesContent":["/**\n * エントリポイント\n * \n * @param input 入力文字列\n * @param tokenizer kuromoji の tokenizer\n * @param isForceNegative true を指定した場合は必ず否定形を返す\n * @return 入力文字列をランダムに否定形にした文字列\n * @throws 引数不正・否定形変換に失敗した場合\n */\nfunction exec(input: string, tokenizer: { tokenize: Function }, isForceNegative: boolean = false): string {\n  if(input === undefined || input === null || input.trim() === '') {\n    throw new InvalidArgumentsError('input is null');\n  }\n  if(tokenizer === undefined || tokenizer === null) {\n    throw new InvalidArgumentsError('tokenizer is null');\n  }\n  \n  // トリムする\n  input = input.trim();\n  // 末尾に「ガチャ」の文字列が遭ったら除去する\n  const removedInput = removeGacha(input);\n  // 「ガチャ」としか書かれていなかったら終わり\n  if(removedInput === '') {\n    return input + 'じゃない';\n  }\n  \n  // 先に否定形に変換できるかどうか確認する\n  let negative;\n  try {\n    negative = parseNegative(removedInput, tokenizer);\n  }\n  catch(error) {\n    throw new ParseNegativeRuntimeError('Failed to parse negative', error);  // 万が一変換中に例外が発生した場合\n  }\n  // 全く変換されていなかったらエラーを返す\n  if(removedInput === negative) {\n    throw new ParseNegativeFailedError('Result text is the same as input text');\n  }\n  \n  // 必ず否定形を返す場合\n  if(isForceNegative) {\n    return negative;\n  }\n  \n  // 否定形に変換するかどうかランダムに決める\n  const isParseNegative = (Math.random() >= 0.5);\n  \n  // 否定形か「ガチャ」を除去した入力文字列を返す\n  return isParseNegative ? negative : removedInput;\n}\n\n/**\n * 末尾に「ガチャ」の文字列があったら除去する\n * \n * @param input 入力文字列\n * @return 末尾に「ガチャ」の文字列があったら除去した文字列・そうでなければ入力文字列そのまま\n */\nfunction removeGacha(input: string): string {\n  const removed = input.replace((/(ガチャ|ｶﾞﾁｬ|がちゃ)$/u), '');\n  return removed;\n}\n\n/**\n * 否定形に変換する\n * \n * @param input 入力文字列\n * @param tokenizer kuromoji の tokenizer\n * @return 入力文字列を否定形にした文字列\n */\nfunction parseNegative(input: string, tokenizer: { tokenize: Function }): string {\n  const parsed = tokenizer.tokenize(input);\n  //console.log(parsed);\n  \n  // 変換する節の位置と変換したい文字列を控える配列\n  const replaces: Array<{ index: number, word: string }> = [];\n  \n  // 最後の節を検索する\n  const lastIndex = parsed.length - 1;\n  const last = parsed[lastIndex];\n  if(last.pos === '形容詞') {\n    if(last.surface_form.endsWith('い')) {\n      replaces.push({ index: lastIndex, word: last.surface_form.replace((/い$/u), 'くない') });\n    }\n  }\n  else if(last.pos === '動詞') {\n    if(last.surface_form.match((/(す|ず)(る|れ)$/u))) {\n      replaces.push({ index: lastIndex, word: last.surface_form.replace((/す(る|れ)$/u), 'すない').replace((/ず(る|れ)$/u), 'じない') });\n    }\n    else if(last.conjugated_type === '一段') {\n      replaces.push({ index: lastIndex, word: last.surface_form.replace((/る$/u), 'ない') });\n    }\n    else if(last.conjugated_type.startsWith('五段')) {\n      replaces.push({ index: lastIndex, word: last.surface_form\n        .replace((/う$/u), 'わ').replace((/く$/u), 'か').replace((/す$/u), 'さ').replace((/つ$/u), 'た').replace((/ぬ$/u), 'な')\n        .replace((/ふ$/u), 'は').replace((/む$/u), 'ま').replace((/ゆ$/u), 'や').replace((/る$/u), 'ら') + 'ない' });\n    }\n  }\n  else if(last.pos === '助動詞') {\n    if(last.surface_form === 'た' && parsed.length >= 2) {\n      // 「た」の場合、手前の節を確認するので、手前に節がない場合は処理をしない\n      const prevIndex = parsed.length - 2;\n      const prev = parsed[prevIndex];\n      if(prev.pos === '動詞' && ['て', 'い'].includes(prev.surface_form)) {\n        replaces.push({ index: lastIndex, word: 'なかった' });\n      }\n      else if(prev.surface_form === '来') {\n        replaces.push({ index: lastIndex, word: 'ない' });\n      }\n      else if(prev.surface_form.endsWith('い')) {\n        replaces.push({ index: lastIndex, word: 'てない' });\n      }\n      else if(prev.pos === '形容詞') {\n        // 直前の文字列の「基本形」を利用し、末尾が形容詞だった場合と同じ変換を行う\n        if(prev.basic_form.endsWith('い')) {\n          replaces.push({ index: prevIndex, word: prev.basic_form.replace((/い$/u), 'くなかっ') }); // 末尾の「た」をそのまま使う\n        }\n      }\n      else if(prev.pos === '動詞') {\n        // 直前の文字列の「基本形」を利用し、末尾が動詞だった場合と同じ変換を行う\n        if(prev.conjugated_type === '一段') {\n          replaces.push({ index: prevIndex, word: prev.basic_form.replace((/る$/u), 'なかっ') });\n        }\n        else if(prev.conjugated_type.startsWith('五段')) {\n          replaces.push({ index: prevIndex, word: prev.basic_form\n            .replace((/う$/u), 'わ').replace((/く$/u), 'か').replace((/す$/u), 'さ').replace((/つ$/u), 'た').replace((/ぬ$/u), 'な')\n            .replace((/ふ$/u), 'は').replace((/む$/u), 'ま').replace((/ゆ$/u), 'や').replace((/る$/u), 'ら') + 'なかっ' });\n        }\n      }\n    }\n    else if(last.surface_form === 'だ' && parsed.length >= 2) {  // 「きれい 'だ'」など\n      const prevIndex = parsed.length - 2;\n      const prev = parsed[prevIndex];\n      if(['副詞', '名詞'].includes(prev.pos)) {\n        replaces.push({ index: lastIndex, word: 'じゃない' });\n      }\n    }\n    else if(last.surface_form === 'な' && parsed.length >= 2) {  // 「〜〜的 'な'」など\n      const prevIndex = parsed.length - 2;\n      const prev = parsed[prevIndex];\n      if(['副詞', '名詞'].includes(prev.pos)) {\n        replaces.push({ index: lastIndex, word: 'じゃない' });\n      }\n    }\n    else if(last.surface_form === 'たい') {\n      replaces.push({ index: lastIndex, word: 'たくない' });\n    }\n    else if(last.surface_form === 'ない') {\n      replaces.push({ index: lastIndex, word: 'なくない' });\n    }\n    else if(last.surface_form === 'ます') {\n      replaces.push({ index: lastIndex, word: 'ません' });\n    }\n  }\n  else if(last.pos === '助詞') {\n    if(last.surface_form === 'て') {\n      replaces.push({ index: lastIndex, word: 'ない' });\n    }\n    else if(last.surface_form === 'な' && parsed.length >= 2) {  // 「そぞろ 'な'」など\n      const prevIndex = parsed.length - 2;\n      const prev = parsed[prevIndex];\n      if(['副詞', '名詞'].includes(prev.pos)) {\n        replaces.push({ index: lastIndex, word: 'じゃない' });\n      }\n    }\n  }\n  else if(last.pos === '名詞') {\n    if(['固有名詞', '一般', '代名詞'].includes(last.pos_detail_1)) {\n      replaces.push({ index: lastIndex, word: last.surface_form + 'じゃない' });\n    }\n    else if(['サ変接続', '接尾'].includes(last.pos_detail_1)) {\n      replaces.push({ index: lastIndex, word: last.surface_form + 'しない' });\n    }\n  }\n  else if(last.pos === '副詞') {\n    replaces.push({ index: lastIndex, word: last.surface_form + 'じゃない' });\n  }\n  else if(last.pos === '連体詞') {\n    if(last.surface_form.endsWith('な')) {  // 「大き 'な'」など\n      replaces.push({ index: lastIndex, word: last.surface_form + 'わけない' });\n    }\n  }\n  \n  // 変換する\n  const result = parsed.reduce((prev: string, current: any, index: number) => {\n    const replaceFound = replaces.find(replace => replace.index === index);\n    return prev + (replaceFound ? replaceFound.word : current.surface_form);\n  }, '');\n  return result;\n}\n\n/** ねむいガチャエラー : https://exhikkii.hatenablog.com/entry/2019/05/01/TypeScript_%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%AE%E4%BD%9C%E6%88%90%E3%81%AE%E4%BB%95%E6%96%B9 */\nclass NemuiGachaError implements Error {\n  /** エラー名 */\n  public name: string = 'NemuiGachaError';\n  \n  /**\n   * コンストラクタ\n   * \n   * @param message メッセージ\n   */\n  constructor(public message: string) {\n    if(typeof console !== 'undefined') {\n      console.error(`Name: ${this.name} , Message: ${this.message}`);\n    }\n  }\n  \n  /**\n   * To String\n   * \n   * @return To String\n   */\n  toString() {\n    return `Name: ${this.name} , Message: ${this.message}`;\n  }\n}\n\n/** 引数エラー */\nclass InvalidArgumentsError extends NemuiGachaError {\n  /** エラー名 */\n  public name: string = 'InvalidArgumentsError';\n}\n\n/** 否定形変換実行時エラー */\nclass ParseNegativeRuntimeError extends NemuiGachaError {\n  /** エラー名 */\n  public name: string = 'ParseNegativeRuntimeError';\n  \n  /**\n   * コンストラクタ\n   * \n   * @param message メッセージ\n   * @param originalError 元のエラー\n   */\n  constructor(public message: string, public originalError: Error) {\n    super(message);\n    if(typeof console !== 'undefined') {\n      console.error(this.originalError);\n    }\n  }\n}\n\n/** 否定形変換エラー */\nclass ParseNegativeFailedError extends NemuiGachaError {\n  /** エラー名 */\n  public name: string = 'ParseNegativeFailedError';\n}\n\n/** nemuiGacha */\nconst nemuiGacha = {\n  exec,\n  removeGacha,\n  parseNegative,\n  NemuiGachaError,\n  InvalidArgumentsError,\n  ParseNegativeRuntimeError,\n  ParseNegativeFailedError\n};\n\nexport default nemuiGacha;\n","import React from 'react';\n\nimport * as kuromoji from 'kuromoji';\n\nimport nemuiGacha from './lib/index';\n\nimport './App.scss';\n\n/** アプリ */\nexport default class App extends React.Component {\n  /** State : エラー回避のため型定義のみしておく */\n  state: Readonly<any>;\n  \n  /**\n   * コンストラクタ : State のダミー初期値を用意する\n   * \n   * @param props Props\n   */\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      input          : 'ねむい',  // 入力文字列\n      tokenizer      : null,      // kuromoji が生成する tokenizer を控える\n      isForceNegative: false,     // 必ず否定形に変換するかどうか\n      isDisabled     : true,      // 「ガチャ」ボタンを非活性にするかどうか\n      result         : '',        // 結果文字列\n      error          : '',        // エラー発生時に値を入れる\n      errorFailed    : false      // 否定形変換ができなかった文言があった時は error は空文字のままコレを true にする\n    };\n  }\n  \n  /** 初期化処理 : kuromoji の tokenizer を生成する */\n  componentWillMount() {\n    kuromoji.builder({\n      dicPath: './dict'  // 予め kuromoji の dict/ ディレクトリを public/ 配下にコピーしておく\n    }).build((error: Error, tokenizer: kuromoji.Tokenizer<any>) => {  // ジェネリクス http://js.studio-kingdom.com/typescript/handbook/generics\n      // XMLHttpRequest でのエラーは try / catch でも補足できずココに到達しなかったため、特に対応しない\n      if(error) {\n        return console.error('Failed to build kuromoji', error);\n      }\n      \n      this.setState({\n        tokenizer : tokenizer,\n        isDisabled: false  // 活性化する\n      });\n      \n      // クエリストリングが存在した場合は初期処理を行う\n      if(window.location.search) {\n        // 先頭の '?' を除去し連想配列を作る\n        const params = window.location.search.slice(1).split('&').reduce((prev: any, current) => {\n          const split = current.split('=');\n          const key   = split[0];\n          const value = window.decodeURIComponent(split[1]);\n          prev[key] = value;\n          return prev;\n        }, {});\n        \n        // 'force' パラメータが存在すれば強制的に否定形にする (値はなんでも良い・値未指定でも 'undefined' が入る)\n        if(params.force) {\n          this.setState({\n            isForceNegative: true\n          });\n        }\n        \n        // 'q' パラメータが存在すればその値でガチャを初期実行する\n        if(params.q) {\n          this.setState({\n            input: params.q\n          });\n          this.exec();\n        }\n      }\n    });\n  }\n  \n  /**\n   * テキストボックスの値を State で明示的に管理するために必要 : https://qiita.com/koba04/items/40cc217ab925ef651113\n   * \n   * @param event イベント\n   */\n  onChangeText = (event: React.ChangeEvent<HTMLInputElement>) => {  // 型定義 : https://qiita.com/natsuhiko/items/5d2a526a217e05162a0a\n    this.setState({\n      input     : event.target.value,\n      isDisabled: !event.target.value.trim(),\n    });\n  }\n  \n  /**\n   * チェックボックスの値を State で明示的に管理する\n   * \n   * @param event イベント\n   */\n  onChangeCheckbox = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({\n      isForceNegative: event.target.checked\n    });\n  }\n  \n  /**\n   * ガチャ実行 : this.setState が undefined になるのを防ぐためアロー関数にする : https://qiita.com/kilo/items/714287a3ea41b4187545\n   * \n   * @param event イベント\n   */\n  onSubmit = (event: React.FormEvent) => {\n    event.preventDefault();  // https://react.keicode.com/basics/react-form-basics.php\n    this.exec();\n  }\n  \n  /** ガチャを実行する */\n  exec() {\n    this.setState({\n      isDisabled : true,  // 非活性にする\n      result     : '',\n      error      : '',\n      errorFailed: false\n    });\n    \n    if(!this.state.input.trim()) {\n      this.setState({\n        isDisabled: false,\n        error     : 'Please input text'\n      });\n      return;\n    }\n    \n    let result = '';\n    try {\n      result = nemuiGacha.exec(this.state.input, this.state.tokenizer, this.state.isForceNegative);\n    }\n    catch(error) {\n      if(error instanceof nemuiGacha.InvalidArgumentsError) {\n        this.setState({\n          isDisabled: false,\n          error     : error.message\n        });\n      }\n      else if(error instanceof nemuiGacha.ParseNegativeRuntimeError) {\n        this.setState({\n          isDisabled: false,\n          error     : '(Runtime Error) ' + error.message\n        });\n      }\n      else if(error instanceof nemuiGacha.ParseNegativeFailedError) {\n        this.setState({\n          isDisabled : false,\n          errorFailed: true\n        });\n      }\n      else {\n        this.setState({\n          isDisabled: false,\n          error     : 'Unexpected Error'\n        });\n      }\n      return;\n    }\n    \n    if(result) {\n      setTimeout(() => {\n        this.setState({\n          isDisabled: false,\n          result    : result\n        });\n      }, 250);\n    }\n  }\n  \n  /** レンダリングする */\n  render() {\n    const header = (\n      <header>\n        <h1>Nemui Gacha</h1>\n      </header>\n    );\n    const footer = (\n      <footer>\n        <div className=\"links\">\n          <span>Author : <a href=\"https://neos21.net/\" target=\"_blank\" rel=\"noopener noreferrer\">Neo</a></span>\n          <span><a href=\"https://github.com/Neos21/nemui-gacha-js\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub</a></span>\n        </div>\n      </footer>\n    );\n    \n    if(!this.state.tokenizer) {\n      return (\n        <div className=\"app\">\n          {header}\n          <main className=\"loading\">\n            <div className=\"progress-wrapper\">\n              <div className=\"progress\"><span>...</span>Loading...</div>\n            </div>\n          </main>\n          {footer}\n        </div>\n      );\n    }\n    \n    return (\n      <div className=\"app\">\n        {header}\n        <main>\n          <form onSubmit={this.onSubmit}>\n            <div className=\"input-form\">\n              <input type=\"text\" className=\"input\" value={this.state.input} onChange={this.onChangeText} placeholder=\"ねむい\" />\n              <span className=\"gacha\">ガチャ</span>\n            </div>\n            <div>\n              <button type=\"submit\" className=\"submit\" onClick={this.onSubmit} disabled={this.state.isDisabled}>ガチャ</button>\n            </div>\n            <div className=\"is-force-negative\">\n              <input type=\"checkbox\" tabIndex={-1} checked={this.state.isForceNegative} onChange={this.onChangeCheckbox} />\n            </div>\n          </form>\n          { this.state.result &&\n            <div className=\"result\">{this.state.result}</div>\n          }\n          { this.state.error &&\n            <div className=\"error\">Error : {this.state.error}</div>\n          }\n          { this.state.errorFailed &&\n            <div className=\"error\">\n              <p>うまく否定形に変換できませんでした…。</p>\n              <p><a href={'https://github.com/Neos21/nemui-gacha-js/issues/new?template=bug-report.md&title=' + this.state.input} target=\"_blank\" rel=\"noopener noreferrer\">GitHub で報告する</a></p>\n            </div>\n          }\n        </main>\n        {footer}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.scss';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}